syntax = "proto3";

package advertising.v1;

import "google/protobuf/empty.proto";

import "advertising/v1/campaign.proto";
import "advertising/v1/campaign_events.proto";
import "advertising/v1/campaign_suggestions.proto";
import "advertising/v1/adwords.proto";


// Service for finding appropriate advertising keywords for a business.
service CampaignSuggestions {
    // Endpoint to suggest keywords for a business and estimate their performance.
    rpc SuggestCampaignWithEstimation (SuggestCampaignWithEstimationRequest) returns (SuggestCampaignWithEstimationResponse) {};
}

// A service for interacting with digital ads campaigns
service Campaigns {
  // contract: does not return wholesale price
  // contract: returns a gRPC 403 if caller is unauthorized to access business
  // contract: if Campaign does not exist, returns gRPC 404
  // Get a campaign by campaign id
  rpc Get (CampaignGetRequest) returns (CampaignGetResponse) {};

  // contract: does not return wholesale price
  // contract: returns a gRPC 403 if caller is unauthorized to access business
  // contract: return error if any of the campaign request failed
  // contract: if any Campaign does not exist, return nil in the response list
  // Get a list of campaigns by given campaign ids
  rpc GetMulti (CampaignGetMultiRequest) returns (CampaignGetMultiResponse) {};

  // contract: returns campaigns by date (most recent first)
  // contract: returns gRPC 404 if business ID not found
  // contract: returns empty list of campaigns if business has no campaigns
  // contract: returns gRPC 403 if caller is unauthorized to access business
  // Get a list of campaigns for a business
  rpc List (CampaignListRequest) returns (CampaignListResponse) {};
}

// A service for submitting events relating to a campaign
service CampaignEvents {
  // Create an event signalling that an order was received
  rpc CreateOrderEvent (CreateOrderEventRequest) returns (google.protobuf.Empty) {};

  // Create an event signalling that someone has updated values in the lifeline
  rpc CreateLifelineUpdateEvent (CreateLifelineUpdateEventRequest) returns (google.protobuf.Empty) {};

  // Send an signalling to let Advertising creates campaign near end events for all valid campaigns
  rpc RequestCampaignNearEndEventsCreation (google.protobuf.Empty) returns (google.protobuf.Empty) {};
}

// A service for handling requests to run admin tasks/migrations
service Admin {
  // Iterates over all campaigns and re-calculates and puts all notification events
  rpc ReputAllNotificationEvents (google.protobuf.Empty) returns (google.protobuf.Empty) {};
}

// A service for handling adwords related tasks
service Adwords {
  // Gets all accounts accessible to a business
  rpc GetAllAccounts (GetAllAccountsRequest) returns (GetAllAccountsResponse) {};

  // Gets a stats overview for all accounts associated with the business
  rpc GetStatsForBusiness (GetStatsForBusinessRequest) returns (GetStatsForBusinessResponse) {};

  // Associates credentials with a business
  rpc StoreCredentialsForBusiness (StoreCredentialsForBusinessRequest) returns (google.protobuf.Empty) {};

  // Gets info about the adwords account which is connected to a business
  rpc GetAccountInfo (GetAccountInfoRequest) returns (GetAccountInfoResponse) {};
}

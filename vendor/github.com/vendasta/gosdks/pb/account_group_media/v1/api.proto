syntax = "proto3";

package accountgroupmedia.v1;

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";

// AssociateImageRequest associates an image id in the media service to an account group.
// Also specifies if an image is of a specific type.
message AssociateImageRequest {
    // Account group ID of the account with which to associate the image
    string account_group_id = 1;

    // The unique image id to associate with the account group id
    string image_id = 2;

    // The type to associate with the image.
    ImageType image_type = 3;
}


// DeleteImageRequest deletes an image association
message DeleteImageRequest {
    // Account group ID of the account with which the image to be deleted is associated
    string account_group_id = 1;

    // The unique image id to of the image to delete
    string image_id = 2;
}


// ListImagesRequest is a request to get a list of image association models associated with an account group id
message ListImagesRequest {
    // Account group ID of the account with which the desired images are associated
    string account_group_id = 1;

    // The cursor from the previous response, or ""
    string cursor = 2;

    // The number of results to return
    int64 page_size = 3;

    message Filters {
        repeated ImageType image_type = 1;
        bool include_deleted = 2;
    }

    // Filters for images that meet specific criteria, instead of just getting all non-deleted images back.
    Filters filters = 4;
}


// ImageAssociation is the pairing of an image id to an account group id
message ImageAssociation {
    // Account group ID of the account with which the image is associated
    string account_group_id = 1;

    // The unique image id of the image associated with the account group
    string image_id = 2;

    // The timestap for when the image association was created
    google.protobuf.Timestamp created = 3;

    // What type of image
    ImageType image_type = 4;

    // The timestamp for when the image association was deleted
    google.protobuf.Timestamp deleted = 5;
}


// ListImagesPagedResponse is the list of image association models that are associated to an account group
message ListImagesPagedResponse {
    repeated ImageAssociation images = 1;

    // A cursor that can be provided to retrieve the next page of results
    string next_cursor = 2;

    // Whether or not more results exist
    bool has_more = 3;

    // The total number of results for this query across all pages
    int64 total_results = 4;
}


// Media Service to associate, delete, and get media information
service MediaService {
    rpc AssociateImage (AssociateImageRequest) returns (google.protobuf.Empty) {}
    rpc ListImages (ListImagesRequest) returns (ListImagesPagedResponse) {}
    rpc DeleteImage (DeleteImageRequest) returns (google.protobuf.Empty) {}
}

// The possible image types, that can be associated with an image
enum ImageType {
    NOT_SPECIFIED = 0;
    PRIMARY = 1;
    LOGO = 2;
}

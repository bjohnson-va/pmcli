syntax = "proto3";

package marketplaceapps.v1;

import "google/protobuf/timestamp.proto";
import "marketplace_apps/v1/order_form.proto";
import "marketplace_apps/v1/restrictions.proto";

// IdentifiedPublicKey The identified public keys are considered "identified" because they have an id/key
// associated with them that identifies a user or purpose for using that particular key instead of the default one,
// for being  able to identify the callers of the API. It could be a backend service, a particular user or admin
// for an app, etc.
message IdentifiedPublicKey {
    string public_key_id = 1;
    string public_key = 2;
}

// Frequently asked questions
message FrequentlyAskedQuestions {
  string question = 1;
  string answer = 2;
}

// Integration with vendor center
message Integration {
    // The public key of the app
    string public_key = 1;
    // A list of identified public keys
    repeated IdentifiedPublicKey identified_public_keys = 2;

    // Email of contact for app
    string contact_email = 3;
    // The status of the application
    bool approved = 4;
    // The name of the vendor
    string vendor = 5;
    // A list of the users in the application
    repeated string user_ids = 6;
    // Webhook url: purchase_url
    string purchase_webhook_url = 7;
    // Webhook url: addon_purchase_url
    string addon_purchase_webhook_url = 8;
    // Webhook url: user_mod_url
    string user_mod_webhook_url = 9;
    // Webhook url: salestool_url
    string salestool_webhook_url = 10;
    // Webhook url: account_mod_url
    string account_mod_webhook_url = 11;
    // Webhook url: logout url
    string logout_webhook_url = 12;
    // Email notifications for fulfillment
    repeated string fulfillment_email = 13;
    // SSO url: Entry point for the application
    string entry_url = 14;
    // SSO url: Session code generation url
    string session_url = 15;
    // Service url: get current settings/schema, post updated data
    string settings_url = 16;
    // Reserve Url: for calling out to applications to let them know an activation is coming, but not guaranteed yet
    string reserve_id_url = 17;
    // Contact Url: webhook url for creating/editing a contact
    string contact_webhook_url = 18;
  }

// Reseller marketing information
message MarketingInformation {
    // Reseller marketing information: description
    string description = 1;
    // Reseller marketing information: key selling points
    repeated string key_selling_points = 2;
    // Reseller marketing information: faqs
    repeated FrequentlyAskedQuestions faqs = 3;
    // Reseller marketing information: pdf upload
    repeated string files = 4;
}

// MarketplaceApp is an item that represents a vendor application in the marketplace
message MarketplaceApp {
    // The id of the app
    string app_id = 1;
    // The version of the app
    int64 version = 2;
    // The name of the app
    string name = 3;
    // Icon for the product
    string icon = 4;

    // Allow white labelling
    bool allow_whitelabel = 5;
    // The app is currently in development
    bool in_development = 6;
    // Supports a trial state of the application
    bool trial_support = 7;
    // Order form: the product uses order form
    bool uses_order_form = 8;

    // Product information: tagline
    string tagline = 9;
    // Product information: sign_in_url
    string sign_in_url = 10;
    // Product information: currency
    string currency = 11;
    // Product information: price stored as cents
    int64 price = 12;
    // Product information: billing_frequency
    string billing_frequency = 13;
    // Product information: service_model
    repeated string service_model = 14;
    // Product information: screenshot
    repeated string screenshot = 16;
    // Product information: website_url
    string website_url = 17;
    // Product information: header_image
    string header_image = 18;

    // Product categories [deprecated]
    message Product {
      enum ProductCategories {
          NOT_SET = 0;
          DIGITAL = 1;
          WEBSITE = 2;
          PRINT = 3;
          YELLOW_PAGES = 4;
          RADIO = 5;
          TELEVISION = 6;
          SEM = 7;
          SEO = 8;
          COMBINATION = 9;
          SOCIAL = 10;
          VENDASTA_APP = 11;
          OTHER = 12;
          VENDOR_APP = 13;
      }
    }
    // Category of the app
    Product.ProductCategories product_category = 19;

    // Local marketing index categories
    message Lmi {
      enum LmiCategories {
          NOT_SET = 0;
          WEBSITE = 1;
          CONTENT_AND_EXPERIENCE = 2;
          LISTINGS = 3;
          REPUTATION = 4;
          SEO = 5;
          SOCIAL = 6;
          ADVERTISING = 7;
      }
    }
    // Local marketing index category of the app
    repeated Lmi.LmiCategories lmi_categories = 20;

    // Integration with vendor center
    Integration integration = 21;

    // Order form fields
    OrderForm order_form = 22;

    // Reseller marketing information
    MarketingInformation reseller_marketing = 23;

    // End user marketing information
    MarketingInformation end_user_marketing = 24;

    // A timestamp of when the app was created
    google.protobuf.Timestamp created = 25;
    // A timestamp of when the app was last updated
    google.protobuf.Timestamp updated = 26;

    // Whether or not a partner can negotiate the price of the app
    bool allow_price_negotiation = 27;

    // List of restrictions for the app
    Restrictions restrictions = 28;
}
